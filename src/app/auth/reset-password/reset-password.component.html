<app-backdrop>
  <h2 class="text-2xl font-semibold text-center mb-6">Reset Your Password</h2>
  <p class="text-center text-gray-600 mb-4">
    Enter the verification code sent to: <strong>{{ email }}</strong>
  </p>
  @if (successMessage) {
    <div class="success-message text-center mb-4">{{ successMessage }}</div>
  }
  @if (errorMessage) {
    <div class="error-message text-center mb-4">{{ errorMessage }}</div>
  }
  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">
    <div>
      <label class="block mb-1 font-medium" for="verificationCode">Verification Code</label>
      <input
        type="text"
        id="verificationCode"
        formControlName="verificationCode"
        placeholder="Enter 6-digit code"
        maxlength="6"
        class="form-input"
      />
      @if (form.get('verificationCode')?.invalid && form.get('verificationCode')?.touched) {
        <div class="error-message">Please enter a valid 6-digit code</div>
      }
    </div>
    <div>
      <label class="block mb-1 font-medium" for="password">New Password</label>
      <input type="password" id="password" formControlName="password" class="form-input" />
      @if (form.get('password')?.invalid && form.get('password')?.touched) {
        <div class="error-message">Password must be at least 8 characters</div>
      }
    </div>
    <div>
      <label class="block mb-1 font-medium" for="confirmPassword">Confirm Password</label>
      <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-input" />
      @if (form.errors?.['mismatch'] && form.get('confirmPassword')?.touched) {
        <div class="error-message">Passwords do not match</div>
      }
    </div>
    <button type="submit" [disabled]="form.invalid || isLoading" class="btn-primary">
      {{ isLoading ? 'Resetting...' : 'Reset Password' }}
    </button>
    <div class="flex justify-between text-sm mt-4">
      <button type="button" (click)="goBack()" class="btn-secondary">‚Üê Change Email</button>
      <button type="button" (click)="resendCode()" class="text-blue-600 hover:text-blue-800">Resend Code</button>
    </div>
  </form>
</app-backdrop>

