  <div class="absolute inset-0 bg-black opacity-50"></div> 
  <div class="relative max-w-4xl mx-auto p-1 flex items-center justify-center">
    <div class="bg-white p-4 rounded-xl shadow-2xl w-full max-w-md " >
      <h2 class="text-3xl font-bold mb-6 text-center text-blue-600">Create Account</h2>

      @if (!showConfirmation()) {
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
          <div>
            <input 
              formControlName="firstName" 
              class="form-input" 
              placeholder="First Name" 
              type="text">
            @if (form.get('firstName')?.invalid && form.get('firstName')?.touched) {
              <p class="text-red-500 text-sm">First name is required</p>
            }
          </div>

          <div>
            <input 
              formControlName="middleName" 
              class="form-input" 
              placeholder="Middle Name (Optional)" 
              type="text">
          </div>

          <div>
            <input 
              formControlName="lastName" 
              class="form-input" 
              placeholder="Last Name" 
              type="text">
            @if (form.get('lastName')?.invalid && form.get('lastName')?.touched) {
              <p class="text-red-500 text-sm">Last name is required</p>
            }
          </div>

          <div>
            <input 
              formControlName="email" 
              class="form-input" 
              placeholder="Email" 
              type="email">
            @if (form.get('email')?.invalid && form.get('email')?.touched) {
              <p class="text-red-500 text-sm">Please enter a valid email</p>
            }
          </div>

          <div>
            <input 
              formControlName="phoneNumber" 
              class="form-input" 
              placeholder="Phone Number" 
              type="tel">
            @if (form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched) {
              <p class="text-red-500 text-sm">Phone number is required</p>
            }
          </div>

          <div>
            <input 
              formControlName="password" 
              class="form-input" 
              placeholder="Password" 
              type="password">
            @if (form.get('password')?.invalid && form.get('password')?.touched) {
              <p class="text-red-500 text-sm">Password must be at least 8 characters</p>
            }
          </div>

          <div>
            <input 
              formControlName="confirmPassword" 
              class="form-input" 
              placeholder="Confirm Password" 
              type="password">
            @if (form.errors?.['mismatch'] && form.get('confirmPassword')?.touched) {
              <p class="text-red-500 text-sm">Passwords do not match</p>
            }
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" for="jobPreferences">Job Preferences (Optional)</label>
            <app-multi-select
              [options]="jobPreferenceOptions"
              formControlName="jobPreferences"
              placeholder="Select job preferences"
              (click)="$event.stopPropagation()">
            </app-multi-select>
          </div>

          <button 
            type="submit" 
            class="btn-primary w-full" 
            [disabled]="loading">
            Sign Up
          </button>
          
          @if (errorMessage) {
            <p class="text-red-500 text-center">{{ errorMessage }}</p>
          }
          
          @if (loading) {
            <p class="text-center text-gray-600">Loading...</p>
          }
        </form>
      }

      @if (showConfirmation()) {
        <div class="space-y-4">
          <input 
            class="form-input" 
            placeholder="Confirmation Code" 
            type="text" 
            [(ngModel)]="confirmationCode">
          
          <button 
            class="btn-primary w-full" 
            (click)="onConfirm()" 
            [disabled]="loading">
            Confirm
          </button>

          @if (errorMessage) {
            <p class="text-red-500 text-center">{{ errorMessage }}</p>
          }
          @if (loading) {
            <p class="text-center text-gray-600">Loading...</p>
          }
        </div>
      }

      <p class="text-center mt-4">
        Already have an account? 
        <a routerLink="/auth/signin" class="text-blue-600 hover:underline">Sign In</a>
      </p>
    </div>
  </div>